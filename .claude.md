# AI-Powered 小紅書 Content Generator

An MCP (Model Context Protocol) server that generates engaging 小紅書 (Xiaohongshu) posts using a multi-agent AI workflow.

## Project Overview

This project helps users create high-quality 小紅書 posts from various input sources (text, files, websites) using an automated multi-agent system.

### Multi-Agent Workflow

1. **Generator Agent**: Creates initial post draft from source content
2. **Critic Agent**: Reviews and provides constructive feedback
3. **Improvement Loop**: Generator refines based on critique (2-3 iterations)
4. **Human Review**: User reviews final output and can provide additional feedback

## Architecture

```
xhs-assistant/
├── src/
│   ├── server.py              # MCP server setup & tool handlers
│   ├── tools/                 # MCP tool implementations
│   │   ├── extract.py         # PDF & image content extraction
│   │   ├── web.py            # Web page fetching & extraction
│   │   └── generator.py      # Main post generation orchestrator
│   ├── agents/               # Multi-agent system
│   │   ├── prompts.py        # Generator & critic prompts
│   │   └── orchestrator.py   # Agent workflow coordination
│   └── utils/                # Helper utilities
│       └── xhs_formatter.py  # Post formatting & validation
├── main.py                   # Entry point
└── pyproject.toml           # Dependencies
```

## MCP Tools Exposed

### 1. `extract_content`
- **Purpose**: Extract text from PDF or image files
- **Input**: `file_path` (string)
- **Output**: Extracted content + metadata
- **Status**: TODO - needs implementation

### 2. `fetch_webpage`
- **Purpose**: Fetch and extract content from URLs
- **Input**: `url` (string)
- **Output**: Page title + extracted content
- **Status**: TODO - needs implementation

### 3. `generate_xhs_post`
- **Purpose**: Generate engaging 小紅書 post using multi-agent workflow
- **Inputs**:
  - `content` (required): Source content
  - `context` (optional): Additional context/instructions
  - `iterations` (optional, default=2): Number of critic-improve cycles
- **Output**: Final post + process log showing all iterations
- **Status**: TODO - needs implementation

## 小紅書 Post Guidelines

Posts should be:
- Engaging and conversational tone
- Natural emoji usage (not excessive)
- Catchy title/opening hook
- Relevant hashtags
- Authentic and relatable
- Mobile-friendly formatting (short paragraphs)

## Usage with Claude Desktop

Add to your Claude Desktop MCP settings:

```json
{
  "mcpServers": {
    "xhs-assistant": {
      "command": "python",
      "args": ["/path/to/xhs-assistant/main.py"]
    }
  }
}
```

Then in Claude Desktop:
```
User: "Generate a post from this PDF: report.pdf"
→ Tool uses extract_content → generate_xhs_post
→ Returns polished post with process log
```

## Implementation Status

- [x] Project structure created
- [x] MCP server skeleton
- [x] Tool definitions
- [x] Agent prompts defined
- [ ] PDF extraction implementation
- [ ] Image analysis implementation
- [ ] Web scraping implementation
- [ ] AI model integration (Anthropic API)
- [ ] Agent orchestration logic
- [ ] Post formatting & validation

## Next Steps

1. Add dependencies to `pyproject.toml`:
   - `anthropic` - For AI agent calls
   - `pypdf` - PDF extraction
   - `pillow` - Image handling
   - `beautifulsoup4` - Web scraping

2. Implement core functionality:
   - File extraction (extract.py)
   - Web fetching (web.py)
   - AI model integration (orchestrator.py)
   - Multi-agent workflow (generator.py)

3. Test with Claude Desktop
4. Refine prompts based on output quality
5. Add style guidelines configuration
